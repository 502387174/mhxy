<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ¢¦å¹»è¥¿æ¸¸è·‘å•†åŠ©æ‰‹ - å®˜æ–¹æ—¶é—´åŒæ­¥ç‰ˆ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Microsoft YaHei", "å¾®è½¯é›…é»‘", sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a0a0f 0%, #2d1526 100%);
      color: #e0e0ff;
      min-height: 100vh;
      padding: 5px;
      font-size: 14px;
    }

    .container {
      max-width: 400px;
      margin: 0 auto;
      position: relative;
    }

    /* é¡¶éƒ¨çŠ¶æ€æ  */
    .status-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: rgba(5, 15, 30, 0.9);
      color: #a0c0ff;
      padding: 8px 15px;
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      z-index: 1000;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
    }

    .header {
      text-align: center;
      margin: 20px 0 10px 0;
      padding-top: 5px;
    }

    .header h1 {
      color: #f8d568;
      font-size: 20px;
      text-shadow: 0 0 10px rgba(248, 213, 104, 0.5);
      letter-spacing: 1px;
      margin-bottom: 3px;
      background: linear-gradient(to right, #f8d568, #ff9900);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .header p {
      color: #95c1ff;
      font-size: 12px;
    }

    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #4d7dbd, transparent);
      margin: 20px 0;
    }

    /* ç½—ç›˜å®¹å™¨ */
    .compass-container {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto;
      margin-bottom: 10px;
    }

    .compass-background {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: radial-gradient(circle, #0c2b47 0%, #061220 100%);
      border: 3px solid #2a5f96;
      box-shadow: 0 0 20px rgba(42, 95, 150, 0.7);
      position: relative;
      overflow: hidden;
    }

    .compass-hour {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      transform-origin: 0 0;
    }

    .compass-hour-line {
      position: absolute;
      top: 0;
      left: 50%;
      width: 2px;
      height: 20px;
      background: linear-gradient(to bottom, rgba(74, 143, 214, 0.6), transparent);
      transform-origin: center 150px;
    }

    .compass-hour-text {
      position: absolute;
      color: #a0c0ff;
      font-size: 14px;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-shadow: 0 0 5px rgba(74, 143, 214, 0.8);
    }

    .current-hour-mark {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%) translateY(-10px);
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #ff3366;
      box-shadow: 0 0 15px rgba(255, 51, 102, 0.7);
      z-index: 10;
    }

    .current-hour-dot {
      position: absolute;
      top: 0;
      left: 50%;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #fff;
      transform: translateX(-50%) translateY(25px);
    }

    .refresh-hint {
      position: absolute;
      top: 30px;
      right: 30px;
      color: #ff9900;
      font-weight: bold;
      font-size: 20px;
    }

    /* å€’è®¡æ—¶åŒºåŸŸ */
    .countdown-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(10, 30, 50, 0.7);
      border: 2px solid #2a5f96;
      border-radius: 8px;
      padding: 10px 15px;
      text-align: center;
      width: 150px;
      z-index: 5;
    }

    .countdown-title {
      color: #66ffff;
      font-size: 12px;
      margin-bottom: 3px;
    }

    .countdown-time {
      font-size: 18px;
      font-weight: bold;
      color: #66ffff;
      margin: 3px 0;
      text-shadow: 0 0 8px rgba(102, 255, 255, 0.6);
    }

    .cancel-alert-btn {
      background: linear-gradient(to bottom, #ff5555, #cc0000);
      color: white;
      border: none;
      border-radius: 20px;
      padding: 8px 20px;
      margin-top: 15px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
    }

    .cancel-alert-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 8px rgba(0, 0, 0, 0.4);
    }

    /* æ“ä½œåŒº */
    .operation-panel {
      background: rgba(25, 50, 80, 0.6);
      border: 1px solid #3a6390;
      border-radius: 8px;
      padding: 10px;
      margin: 10px auto;
      max-width: 350px;
      text-align: center;
    }

    .operation-text {
      color: #c0d0ff;
      margin-bottom: 8px;
      font-size: 12px;
    }

    .incense-btn {
      background: linear-gradient(to bottom, #ff6666, #cc3333);
      color: white;
      font-size: 14px;
      font-weight: bold;
      border: none;
      border-radius: 20px;
      padding: 8px 25px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.3);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    .incense-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
    }

    .incense-btn:active {
      transform: translateY(1px);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }

         /* å•†å“ä»·æ ¼åŒºåŸŸ */
     .prices-header {
       display: flex;
       align-items: center;
       justify-content: space-between;
       margin: 15px 0 10px;
       padding-bottom: 5px;
       border-bottom: 2px solid #3a6390;
     }

     /* åŸå¸‚ç­›é€‰æŒ‰é’® */
     .city-filter {
       display: flex;
       justify-content: center;
       gap: 8px;
       margin: 10px 0;
       flex-wrap: wrap;
     }

     .city-filter-btn {
       background: linear-gradient(to bottom, #4d7dbd, #3a6390);
       color: white;
       border: none;
       border-radius: 15px;
       padding: 6px 12px;
       font-size: 12px;
       cursor: pointer;
       transition: all 0.3s;
       opacity: 0.7;
     }

     .city-filter-btn:hover {
       opacity: 1;
       transform: translateY(-1px);
       box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
     }

     .city-filter-btn.active {
       background: linear-gradient(to bottom, #66ccff, #4d7dbd);
       opacity: 1;
       transform: scale(1.05);
     }

     .city-card.hidden {
       display: none;
     }

    .prices-header h2 {
      color: #ffcc66;
      font-size: 16px;
    }

    .price-update {
      color: #66ccff;
      font-size: 11px;
    }

    .current-hour {
      color: #ff9900;
      font-weight: bold;
    }

    .prices-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 8px;
      margin-bottom: 15px;
    }

         .city-card {
       background: rgba(20, 40, 70, 0.6);
       border: 1px solid #3a6390;
       border-radius: 8px;
       padding: 15px 10px 10px 10px;
       position: relative;
       overflow: hidden;
     }

         .city-card::after {
       content: '';
       position: absolute;
       top: 0;
       left: 0;
       border-width: 0 0 30px 30px;
       border-style: solid;
       border-color: transparent transparent #2a5f96 transparent;
     }

         .city-card .city-name {
       position: absolute;
       top: 0;
       left: 0;
       background: linear-gradient(135deg, #2a5f96, #1e4a7a);
       color: white;
       font-weight: bold;
       padding: 4px 12px;
       font-size: 12px;
       border-bottom-right-radius: 8px;
       box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
       z-index: 2;
     }

         .price-item {
       display: flex;
       justify-content: space-between;
       padding: 8px 0;
       border-bottom: 1px dashed #304f70;
       font-size: 12px;
       margin-top: 5px;
     }

    .price-item:last-child {
      border-bottom: none;
    }

    .item-name {
      color: #b0d0ff;
    }

    .price-value {
      color: #ffd700;
      font-weight: bold;
    }

    .price-hint {
      font-size: 12px;
      color: #a0b0d0;
      margin-left: 5px;
    }

    /* æ¨èè·¯çº¿åŒºåŸŸ */
    .recommendations {
      background: rgba(20, 40, 70, 0.8);
      border: 1px solid #3a6390;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
    }

    .recommendations h2 {
      color: #66ccff;
      margin-bottom: 10px;
      font-size: 16px;
      text-align: center;
    }

    .recommendation {
      background: rgba(30, 60, 100, 0.5);
      border-left: 4px solid #66ccff;
      border-radius: 0 8px 8px 0;
      padding: 10px;
      margin-bottom: 10px;
    }

    .route-title {
      color: #ffcc66;
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .route-steps {
      color: #c0d8ff;
      line-height: 1.4;
      font-size: 12px;
    }

    .route-highlight {
      color: #ff9900;
      font-weight: bold;
    }

    .current-time {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(10, 30, 50, 0.8);
      padding: 8px 15px;
      border-radius: 15px;
      font-size: 14px;
      border: 1px solid #3a6390;
      color: #a0c0ff;
    }

    .compact-toggle {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(10, 30, 50, 0.8);
      padding: 8px 12px;
      border-radius: 15px;
      font-size: 16px;
      border: 1px solid #3a6390;
      color: #a0c0ff;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s;
    }

    /* äº¤æ˜“è®°å½•åŠŸèƒ½ */
    .trade-record {
      position: fixed;
      top: 50px;
      right: 10px;
      background: rgba(10, 30, 50, 0.95);
      border: 1px solid #3a6390;
      border-radius: 10px;
      padding: 12px;
      width: 220px;
      z-index: 999;
      display: none;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    }

    .trade-record.show {
      display: block;
    }

    .trade-record h3 {
      color: #ffcc66;
      font-size: 14px;
      margin-bottom: 10px;
      text-align: center;
      border-bottom: 1px solid #3a6390;
      padding-bottom: 5px;
    }

    .trade-item {
      background: rgba(30, 60, 100, 0.6);
      border: 1px solid #4d7dbd;
      border-radius: 6px;
      padding: 8px;
      margin-bottom: 6px;
      font-size: 12px;
      position: relative;
    }

    .trade-item .item-info {
      color: #b0d0ff;
      margin-bottom: 3px;
      font-weight: bold;
    }

    .trade-item .price-info {
      color: #ffd700;
      font-weight: bold;
      font-size: 13px;
    }

    .trade-item .time-info {
      color: #a0b0d0;
      font-size: 10px;
      margin-top: 3px;
    }

    .trade-actions {
      display: flex;
      gap: 6px;
      margin-top: 10px;
    }

    .trade-btn {
      background: linear-gradient(to bottom, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 15px;
      padding: 6px 12px;
      font-size: 11px;
      cursor: pointer;
      flex: 1;
      transition: all 0.3s;
    }

    .trade-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    .trade-btn.clear {
      background: linear-gradient(to bottom, #ff6666, #cc3333);
    }



    .trade-toggle {
      position: fixed;
      top: 50px;
      right: 10px;
      background: rgba(10, 30, 50, 0.8);
      padding: 8px 12px;
      border-radius: 15px;
      font-size: 16px;
      border: 1px solid #3a6390;
      color: #a0c0ff;
      cursor: pointer;
      z-index: 1000;
      transition: all 0.3s;
    }

    .trade-toggle:hover {
      background: rgba(20, 50, 80, 0.9);
      transform: scale(1.1);
    }

    .trade-toggle.active {
      background: rgba(76, 175, 80, 0.8);
      color: white;
    }

    /* å•†å“è®°å½•æŒ‰é’® */
    .record-btn {
      background: linear-gradient(to bottom, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 2px 6px;
      font-size: 10px;
      cursor: pointer;
      margin-left: 5px;
      transition: all 0.3s;
      opacity: 0.8;
    }

    .record-btn:hover {
      opacity: 1;
      transform: scale(1.1);
    }

    .record-btn.recorded {
      background: linear-gradient(to bottom, #ff6666, #cc3333);
    }

    .price-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 0;
      border-bottom: 1px dashed #304f70;
      font-size: 12px;
    }

    .compact-toggle:hover {
      background: rgba(20, 50, 80, 0.9);
      transform: scale(1.1);
    }

    .compact-mode .operation-panel,
    .compact-mode .recommendations {
      display: none;
    }

    .compact-mode .prices-container {
      grid-template-columns: repeat(2, 1fr);
    }

    .compact-mode .trade-record {
      top: 80px;
      right: 10px;
    }

    .quick-route-tip {
      background: rgba(255, 153, 0, 0.1);
      border: 1px solid #ff9900;
      border-radius: 8px;
      padding: 8px;
      margin: 10px 0;
      font-size: 12px;
      color: #ffcc66;
      display: none;
    }

    .compact-mode .quick-route-tip {
      display: block;
    }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .compass-container {
        width: 180px;
        height: 180px;
      }

      .compass-hour-text {
        font-size: 12px;
        top: 15px;
      }

      .countdown-box {
        width: 140px;
        padding: 8px 12px;
      }

      .countdown-time {
        font-size: 16px;
      }

      .prices-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    @media (max-width: 480px) {
      .header h1 {
        font-size: 18px;
      }

      .compass-container {
        width: 160px;
        height: 160px;
      }

      .refresh-hint {
        font-size: 16px;
        top: 15px;
        right: 15px;
      }

      .operation-panel {
        padding: 10px;
      }

      .prices-container {
        grid-template-columns: 1fr;
      }

      .container {
        max-width: 350px;
      }
    }

    /* è·¯çº¿é€‰æ‹©æŒ‰é’®æ ·å¼ */
    .route-selector button {
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .route-selector button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .route-selector button:active {
      transform: translateY(0);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
  </style>
</head>
<body>
<div class="current-time">09:18 56A 5G 47</div>
<div class="compact-toggle" onclick="toggleCompact()">ğŸ“±</div>
<div class="trade-toggle" onclick="toggleTradeRecord()">ğŸ“</div>

   <!-- äº¤æ˜“è®°å½•é¢æ¿ -->
  <div class="trade-record" id="tradeRecord">
    <h3>ğŸ“‹ äº¤æ˜“è®°å½•</h3>
    <div id="tradeItems"></div>
    <div class="trade-actions">
      <button class="trade-btn clear" onclick="clearAllTrades()">ä¸€é”®æ¸…ç©º</button>
    </div>
  </div>

<div class="container">
  <div class="header">
    <h1>ã€Šæ¢¦å¹»è¥¿æ¸¸ã€‹ç”µè„‘ç‰ˆè·‘å•†åŠ©æ‰‹</h1>
    <p>æ—¶è¾°åˆ·æ–°æé†’ Â· å•†äººç‰©å“ä»·æ ¼ Â· è·‘å•†æ¨èè·¯çº¿</p>
  </div>

  <div class="divider"></div>

  <!-- ç½—ç›˜åŒºåŸŸ -->
  <div class="compass-container">
    <div class="compass-background">
      <!-- æ—¶è¾°æ ‡è®° -->
      <div class="compass-hour" style="transform: rotate(0deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">å­</div>
      </div>
      <div class="compass-hour" style="transform: rotate(30deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">ä¸‘</div>
      </div>
      <div class="compass-hour" style="transform: rotate(60deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">å¯…</div>
      </div>
      <div class="compass-hour" style="transform: rotate(90deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">å¯</div>
      </div>
      <div class="compass-hour" style="transform: rotate(120deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">è¾°</div>
      </div>
      <div class="compass-hour" style="transform: rotate(150deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">å·³</div>
      </div>
      <div class="compass-hour" style="transform: rotate(180deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">åˆ</div>
      </div>
      <div class="compass-hour" style="transform: rotate(210deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">æœª</div>
      </div>
      <div class="compass-hour" style="transform: rotate(240deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">ç”³</div>
      </div>
      <div class="compass-hour" style="transform: rotate(270deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">é…‰</div>
      </div>
      <div class="compass-hour" style="transform: rotate(300deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">æˆŒ</div>
      </div>
      <div class="compass-hour" style="transform: rotate(330deg);">
        <div class="compass-hour-line"></div>
        <div class="compass-hour-text">äº¥</div>
      </div>

      <div class="current-hour-mark"></div> 
        <div class="current-hour-dot"></div>
        <div class="refresh-hint">åˆ·</div>

      <!-- å€’è®¡æ—¶åŒºåŸŸ -->
      <div class="countdown-box">
        <div class="countdown-title">ç¦»ä¸‹ä¸€ä¸ªæ—¶è¾°è¿˜æœ‰</div>
        <div class="countdown-time" id="hour-countdown">88ç§’</div>
        <div class="countdown-title">è·ç¦»ä¸‹æ¬¡åˆ·ä»·è¿˜æœ‰</div>
        <div class="countdown-time" id="price-countdown">88ç§’</div>
        <button class="cancel-alert-btn">å–æ¶ˆæé†’</button>
      </div>
    </div>
  </div>

  <div class="divider"></div>

  <!-- æ“ä½œåŒºåŸŸ -->
  <div class="operation-panel">
    <p class="operation-text">ç‚¹å‡»å¼€å¯æŒ‰é’®ï¼Œæ‰‹æœºå°†å†›ä»¤å°†ä¼šåœ¨30åˆ†é’Ÿåæé†’ä½ </p>
    <button class="incense-btn">å¼€å¯æ‘„å¦–é¦™æé†’</button>
  </div>

     <!-- ä»·æ ¼è¡¨åŒºåŸŸ -->
   <div class="prices-header">
     <h2>å•†äººç‰©å“ä»·æ ¼</h2>
     <div class="price-update">å½“å‰æ—¶è¾°ï¼š<span class="current-hour" id="current-hour-display">æœªæ—¶</span> | åˆ·ä»·å€’è®¡æ—¶ï¼š<span id="price-refresh">88</span>ç§’</div>
   </div>

   <!-- åŸå¸‚ç­›é€‰æŒ‰é’® -->
   <div class="city-filter">
     <button class="city-filter-btn active" onclick="filterCity('all')">å…¨éƒ¨åŸå¸‚</button>
     <button class="city-filter-btn" onclick="filterCity('åœ°åºœ')">åœ°åºœ</button>
     <button class="city-filter-btn" onclick="filterCity('é•¿å®‰')">é•¿å®‰</button>
     <button class="city-filter-btn" onclick="filterCity('å‚²æ¥')">å‚²æ¥</button>
     <button class="city-filter-btn" onclick="filterCity('é•¿å¯¿')">é•¿å¯¿</button>
     <button class="city-filter-btn" onclick="filterCity('åŒ—ä¿±')">åŒ—ä¿±</button>
   </div>

     <!-- å¿«é€Ÿè·¯çº¿æç¤º -->
   <div class="quick-route-tip">
     <strong>ğŸ’¡ å¿«é€Ÿè·¯çº¿ï¼š</strong>åœ°åºœçº¸é’±â†’é•¿å®‰æ£‰å¸ƒâ†’åœ°åºœé¦–é¥°â†’é•¿å®‰æ‰‡å­<br>
           <small>å¿«æ·é”®ï¼šCtrl+1(ç´§å‡‘æ¨¡å¼) Ctrl+2/3/4(è·¯çº¿åˆ‡æ¢) Ctrl+5-0(åŸå¸‚ç­›é€‰) Ctrl+T(äº¤æ˜“è®°å½•) | ç‚¹å‡»å•†å“åçš„"è®°å½•"æŒ‰é’®è¾“å…¥çœŸå®ä»·æ ¼</small>
   </div>

     <div class="prices-container">
          <!-- åœ°åºœ -->
      <div class="city-card" data-city="åœ°åºœ">
       <div class="city-name">åœ°åºœ</div>
       <div class="price-item">
         <span class="item-name">çº¸é’±</span>
         <span><span class="price-value">3000</span><span class="price-hint">â†“</span><button class="record-btn" onclick="recordItem('çº¸é’±', 3000, 'åœ°åºœ')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">å¤œæ˜ç </span>
         <span><span class="price-value">8000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('å¤œæ˜ç ', 8000, 'åœ°åºœ')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">é¦–é¥°</span>
         <span><span class="price-value">4300</span><span class="price-hint">â†“</span><button class="record-btn" onclick="recordItem('é¦–é¥°', 4300, 'åœ°åºœ')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">çç </span>
         <span><span class="price-value">5500</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('çç ', 5500, 'åœ°åºœ')">è®°å½•</button></span>
       </div>
       <div class="price-item" style="border-top: 2px solid #4d7dbd; margin-top: 5px; padding-top: 5px;">
         <span class="item-name" style="color: #66ccff; font-size: 11px;">æ¨è</span>
         <span style="color: #66ccff; font-size: 11px;">çº¸é’±ã€é¦–é¥°</span>
       </div>
     </div>

                   <!-- é•¿å®‰ -->
      <div class="city-card" data-city="é•¿å®‰">
       <div class="city-name">é•¿å®‰</div>
       <div class="price-item">
         <span class="item-name">æ£‰å¸ƒ</span>
         <span><span class="price-value">3500</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('æ£‰å¸ƒ', 3500, 'é•¿å®‰')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">ä½›ç </span>
         <span><span class="price-value">7000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('ä½›ç ', 7000, 'é•¿å®‰')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">æ‰‡å­</span>
         <span><span class="price-value">3800</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('æ‰‡å­', 3800, 'é•¿å®‰')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">æ­¦å™¨</span>
         <span><span class="price-value">4000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('æ­¦å™¨', 4000, 'é•¿å®‰')">è®°å½•</button></span>
       </div>
       <div class="price-item" style="border-top: 2px solid #4d7dbd; margin-top: 5px; padding-top: 5px;">
         <span class="item-name" style="color: #66ccff; font-size: 11px;">æ¨è</span>
         <span style="color: #66ccff; font-size: 11px;">æ£‰å¸ƒã€æ‰‡å­ã€ä½›ç </span>
       </div>
     </div>

                   <!-- å‚²æ¥ -->
      <div class="city-card" data-city="å‚²æ¥">
       <div class="city-name">å‚²æ¥</div>
       <div class="price-item">
         <span class="item-name">å¸½å­</span>
         <span><span class="price-value">3500</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('å¸½å­', 3500, 'å‚²æ¥')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">å•†å“ç›</span>
         <span><span class="price-value">5500</span><span class="price-hint">â†“</span><button class="record-btn" onclick="recordItem('å•†å“ç›', 5500, 'å‚²æ¥')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">èœ¡çƒ›</span>
         <span><span class="price-value">2000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('èœ¡çƒ›', 2000, 'å‚²æ¥')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">å•†å“é…’</span>
         <span><span class="price-value">4000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('å•†å“é…’', 4000, 'å‚²æ¥')">è®°å½•</button></span>
       </div>
       <div class="price-item" style="border-top: 2px solid #4d7dbd; margin-top: 5px; padding-top: 5px;">
         <span class="item-name" style="color: #66ccff; font-size: 11px;">æ¨è</span>
         <span style="color: #66ccff; font-size: 11px;">å¸½å­ã€èœ¡çƒ›ã€å•†å“ç›</span>
       </div>
     </div>

                   <!-- é•¿å¯¿ -->
      <div class="city-card" data-city="é•¿å¯¿">
       <div class="city-name">é•¿å¯¿</div>
       <div class="price-item">
         <span class="item-name">æœ¨æ</span>
         <span><span class="price-value">4400</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('æœ¨æ', 4400, 'é•¿å¯¿')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">é¹¿èŒ¸</span>
         <span><span class="price-value">7500</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('é¹¿èŒ¸', 7500, 'é•¿å¯¿')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">é¢ç²‰</span>
         <span><span class="price-value">3000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('é¢ç²‰', 3000, 'é•¿å¯¿')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">å•†å“ç¬¦</span>
         <span><span class="price-value">5300</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('å•†å“ç¬¦', 5300, 'é•¿å¯¿')">è®°å½•</button></span>
       </div>
       <div class="price-item" style="border-top: 2px solid #4d7dbd; margin-top: 5px; padding-top: 5px;">
         <span class="item-name" style="color: #66ccff; font-size: 11px;">æ¨è</span>
         <span style="color: #66ccff; font-size: 11px;">æœ¨æã€é¹¿èŒ¸ã€å•†å“ç¬¦</span>
       </div>
     </div>

                   <!-- åŒ—ä¿± -->
      <div class="city-card" data-city="åŒ—ä¿±">
       <div class="city-name">åŒ—ä¿±</div>
       <div class="price-item">
         <span class="item-name">è¡£ç”²</span>
         <span><span class="price-value">2700</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('è¡£ç”²', 2700, 'åŒ—ä¿±')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">äººå‚</span>
         <span><span class="price-value">7500</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('äººå‚', 7500, 'åŒ—ä¿±')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">é“ƒé“›</span>
         <span><span class="price-value">4300</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('é“ƒé“›', 4300, 'åŒ—ä¿±')">è®°å½•</button></span>
       </div>
       <div class="price-item">
         <span class="item-name">å•†å“æ²¹</span>
         <span><span class="price-value">4000</span><span class="price-hint">~</span><button class="record-btn" onclick="recordItem('å•†å“æ²¹', 4000, 'åŒ—ä¿±')">è®°å½•</button></span>
       </div>
       <div class="price-item" style="border-top: 2px solid #4d7dbd; margin-top: 5px; padding-top: 5px;">
         <span class="item-name" style="color: #66ccff; font-size: 11px;">æ¨è</span>
         <span style="color: #66ccff; font-size: 11px;">è¡£ç”²ã€äººå‚ã€é“ƒé“›</span>
       </div>
     </div>
  </div>

  <!-- æ¨èè·¯çº¿åŒºåŸŸ -->
  <div class="recommendations">
    <h2>è·‘å•†æ¨èè·¯çº¿</h2>
    
    <!-- å¿«é€Ÿè·¯çº¿é€‰æ‹© -->
    <div class="route-selector" style="background: rgba(30, 60, 100, 0.5); border-radius: 8px; padding: 15px; margin-bottom: 20px; text-align: center;">
      <div style="color: #66ccff; font-size: 16px; margin-bottom: 10px;">ğŸ¯ å¿«é€Ÿè·¯çº¿é€‰æ‹©</div>
      <div style="display: flex; justify-content: center; gap: 10px; flex-wrap: wrap;">
        <button onclick="showRoute('newbie')" style="background: linear-gradient(to bottom, #4CAF50, #45a049); color: white; border: none; border-radius: 20px; padding: 8px 16px; cursor: pointer; font-size: 14px;">æ–°æ‰‹è·¯çº¿</button>
        <button onclick="showRoute('intermediate')" style="background: linear-gradient(to bottom, #2196F3, #1976D2); color: white; border: none; border-radius: 20px; padding: 8px 16px; cursor: pointer; font-size: 14px;">è¿›é˜¶è·¯çº¿</button>
        <button onclick="showRoute('advanced')" style="background: linear-gradient(to bottom, #FF9800, #F57C00); color: white; border: none; border-radius: 20px; padding: 8px 16px; cursor: pointer; font-size: 14px;">é«˜çº§è·¯çº¿</button>
        <button onclick="showRoute('all')" style="background: linear-gradient(to bottom, #9C27B0, #7B1FA2); color: white; border: none; border-radius: 20px; padding: 8px 16px; cursor: pointer; font-size: 14px;">æ˜¾ç¤ºå…¨éƒ¨</button>
      </div>
    </div>

    <div class="recommendation" data-route-type="newbie">
      <div class="route-title">æ–°æ‰‹æ¨èï¼šåœ°åºœ - é•¿å®‰çº¿ï¼ˆç¨³å®šæ”¶ç›Šï¼‰</div>
      <div class="route-steps">
        1. åœ¨åœ°åºœè´­ä¹°<span class="route-highlight">çº¸é’±(3000ä»¥ä¸‹)</span>æˆ–<span class="route-highlight">é¦–é¥°(4300ä»¥ä¸‹)</span><br>
        2. å‰å¾€é•¿å®‰åŸå‡ºå”®ç»™å•†äºº<br>
        3. åœ¨é•¿å®‰è´­ä¹°<span class="route-highlight">æ£‰å¸ƒ(3500å·¦å³)</span>æˆ–<span class="route-highlight">æ‰‡å­(3800å·¦å³)</span><br>
        4. è¿”å›åœ°åºœå‡ºå”®ï¼Œå®Œæˆä¸€æ¬¡å¾ªç¯<br>
        <span style="color: #66ccff; font-size: 14px;">ğŸ’¡ é€‚åˆæ–°æ‰‹ï¼Œè·¯çº¿ç®€å•ï¼Œé£é™©è¾ƒä½</span>
      </div>
    </div>

    <div class="recommendation" data-route-type="intermediate">
      <div class="route-title">è¿›é˜¶è·¯çº¿ï¼šé•¿å®‰ - å‚²æ¥çº¿ï¼ˆä¸­ç­‰æ”¶ç›Šï¼‰</div>
      <div class="route-steps">
        1. åœ¨é•¿å®‰è´­ä¹°<span class="route-highlight">æ­¦å™¨(4000å·¦å³)</span>æˆ–<span class="route-highlight">ä½›ç (7000å·¦å³)</span><br>
        2. å‰å¾€å‚²æ¥å›½å‡ºå”®ç»™å•†äºº<br>
        3. åœ¨å‚²æ¥è´­ä¹°<span class="route-highlight">å¸½å­(3500å·¦å³)</span>æˆ–<span class="route-highlight">èœ¡çƒ›(2000å·¦å³)</span><br>
        4. è¿”å›é•¿å®‰å‡ºå”®ï¼Œå®Œæˆä¸€æ¬¡å¾ªç¯<br>
        <span style="color: #66ccff; font-size: 14px;">ğŸ’¡ æ”¶ç›Šç¨³å®šï¼Œé€‚åˆæœ‰ä¸€å®šç»éªŒçš„ç©å®¶</span>
      </div>
    </div>

    <div class="recommendation" data-route-type="advanced">
      <div class="route-title">é«˜æ•ˆè·¯çº¿ï¼šå‚²æ¥ - é•¿å¯¿çº¿ï¼ˆé«˜æ”¶ç›Šï¼‰</div>
      <div class="route-steps">
        1. åœ¨å‚²æ¥è´­ä¹°<span class="route-highlight">å•†å“é…’(4000å·¦å³)</span>æˆ–<span class="route-highlight">å•†å“ç›(5500ä»¥ä¸‹)</span><br>
        2. å‰å¾€é•¿å¯¿æ‘å‡ºå”®ç»™å•†äºº<br>
        3. åœ¨é•¿å¯¿è´­ä¹°<span class="route-highlight">æœ¨æ(4400å·¦å³)</span>æˆ–<span class="route-highlight">é¹¿èŒ¸(7500å·¦å³)</span><br>
        4. è¿”å›å‚²æ¥å‡ºå”®ï¼Œå®Œæˆä¸€æ¬¡å¾ªç¯<br>
        <span style="color: #66ccff; font-size: 14px;">ğŸ’¡ æ”¶ç›Šè¾ƒé«˜ï¼Œä½†éœ€è¦å…³æ³¨ä»·æ ¼æ³¢åŠ¨</span>
      </div>
    </div>

    <div class="recommendation" data-route-type="advanced">
      <div class="route-title">é«˜çº§è·¯çº¿ï¼šé•¿å®‰ - åŒ—ä¿±çº¿ï¼ˆæœ€é«˜æ”¶ç›Šï¼‰</div>
      <div class="route-steps">
        1. åœ¨é•¿å®‰è´­ä¹°<span class="route-highlight">ä½›ç (7000å·¦å³)</span>æˆ–<span class="route-highlight">æ­¦å™¨(4000å·¦å³)</span><br>
        2. å‰å¾€åŒ—ä¿±èŠ¦æ´²å‡ºå”®ç»™å•†äºº<br>
        3. åœ¨åŒ—ä¿±è´­ä¹°<span class="route-highlight">è¡£ç”²(2700å·¦å³)</span>æˆ–<span class="route-highlight">äººå‚(7500å·¦å³)</span><br>
        4. è¿”å›é•¿å®‰å‡ºå”®ï¼Œå®Œæˆä¸€æ¬¡å¾ªç¯<br>
        <span style="color: #66ccff; font-size: 14px;">ğŸ’¡ æ”¶ç›Šæœ€é«˜ï¼Œä½†è·ç¦»è¾ƒè¿œï¼Œé€‚åˆé«˜çº§ç©å®¶</span>
      </div>
    </div>

    <div class="recommendation" data-route-type="intermediate">
      <div class="route-title">ä¸‰åŸå¾ªç¯ï¼šåœ°åºœ - é•¿å®‰ - å‚²æ¥çº¿ï¼ˆç»¼åˆæ”¶ç›Šï¼‰</div>
      <div class="route-steps">
        1. åœ¨åœ°åºœè´­ä¹°<span class="route-highlight">çº¸é’±(3000ä»¥ä¸‹)</span>æˆ–<span class="route-highlight">å¤œæ˜ç (8000å·¦å³)</span><br>
        2. å‰å¾€é•¿å®‰åŸå‡ºå”®ç»™å•†äºº<br>
        3. åœ¨é•¿å®‰è´­ä¹°<span class="route-highlight">æ£‰å¸ƒ(3500å·¦å³)</span>æˆ–<span class="route-highlight">æ‰‡å­(3800å·¦å³)</span><br>
        4. å‰å¾€å‚²æ¥å›½å‡ºå”®ç»™å•†äºº<br>
        5. åœ¨å‚²æ¥è´­ä¹°<span class="route-highlight">å¸½å­(3500å·¦å³)</span>æˆ–<span class="route-highlight">èœ¡çƒ›(2000å·¦å³)</span><br>
        6. è¿”å›åœ°åºœå‡ºå”®ï¼Œå®Œæˆä¸€æ¬¡å¾ªç¯<br>
        <span style="color: #66ccff; font-size: 14px;">ğŸ’¡ ç»¼åˆæ”¶ç›Šå¥½ï¼Œé€‚åˆæœ‰è€å¿ƒçš„ç©å®¶</span>
      </div>
    </div>

    <div class="recommendation" data-route-type="tips" style="background: rgba(255, 102, 102, 0.1); border-left-color: #ff6666;">
      <div class="route-title" style="color: #ff6666;">âš ï¸ è·‘å•†æ³¨æ„äº‹é¡¹</div>
      <div class="route-steps">
        â€¢ æ¯æ¬¡è·‘å•†å‰å…ˆæŸ¥çœ‹å½“å‰ä»·æ ¼ï¼Œé€‰æ‹©æœ€åˆé€‚çš„å•†å“<br>
        â€¢ æ³¨æ„æ—¶è¾°å˜åŒ–ï¼Œä»·æ ¼æ¯10åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡<br>
        â€¢ å»ºè®®æºå¸¦æ‘„å¦–é¦™ï¼Œé¿å…é‡æ€ªæµªè´¹æ—¶é—´<br>
        â€¢ é«˜çº§è·¯çº¿æ”¶ç›Šé«˜ä½†é£é™©ä¹Ÿå¤§ï¼Œæ–°æ‰‹å»ºè®®ä»ç®€å•è·¯çº¿å¼€å§‹<br>
        â€¢ é‡åˆ°ä»·æ ¼å¼‚å¸¸æ—¶ï¼Œå¯ä»¥ç­‰å¾…ä¸‹ä¸€ä¸ªæ—¶è¾°å†è·‘å•†
      </div>
    </div>
  </div>
</div>

<script>
  // æ—¶è¾°åç§°æ•°ç»„
  const hourNames = ["å­", "ä¸‘", "å¯…", "å¯", "è¾°", "å·³", "åˆ", "æœª", "ç”³", "é…‰", "æˆŒ", "äº¥"];

  // è·å–DOMå…ƒç´ 
  const hourCountdownElement = document.getElementById('hour-countdown');
  const priceCountdownElement = document.getElementById('price-countdown');
  const priceRefreshElement = document.getElementById('price-refresh');
  const currentHourDisplay = document.getElementById('current-hour-display');

  // å®˜æ–¹åˆ·æ–°æœºåˆ¶
  const HOUR_DURATION = 150; // æ¯ä¸ªæ—¶è¾°150ç§’ï¼ˆ2åˆ†30ç§’ï¼‰
  const PRICE_REFRESH_DURATION = 600; // å•†å“åˆ·æ–°600ç§’ï¼ˆ10åˆ†é’Ÿï¼‰

  // åˆå§‹åŒ–æ—¶é—´
  let currentHourIndex = 7; // é»˜è®¤æœªæ—¶ï¼ˆç´¢å¼•7ï¼‰
  let hourTimer = HOUR_DURATION;
  let priceTimer = PRICE_REFRESH_DURATION;

  // æ ¹æ®å½“å‰æ—¶é—´è®¡ç®—å€’è®¡æ—¶
  function calculateTimers() {
    const now = new Date();
    const minutes = now.getMinutes();
    const seconds = now.getSeconds();

    // è®¡ç®—å•†å“åˆ·æ–°å€’è®¡æ—¶ï¼ˆæ¯10åˆ†é’Ÿåˆ·æ–°ï¼‰
    const totalSeconds = minutes * 60 + seconds;
    priceTimer = PRICE_REFRESH_DURATION - (totalSeconds % PRICE_REFRESH_DURATION);

    // è®¡ç®—æ—¶è¾°å€’è®¡æ—¶ï¼ˆæ¯2åˆ†30ç§’ä¸€ä¸ªæ—¶è¾°ï¼‰
    hourTimer = HOUR_DURATION - (totalSeconds % HOUR_DURATION);

    // è®¡ç®—å½“å‰æ—¶è¾°ç´¢å¼•
    currentHourIndex = Math.floor(totalSeconds / HOUR_DURATION) % 12;
  }

  // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
  function updateTimers() {
    // æ›´æ–°æ—¶è¾°å€’è®¡æ—¶
    hourCountdownElement.textContent = `${hourTimer}ç§’`;

    // æ›´æ–°å•†å“åˆ·æ–°å€’è®¡æ—¶
    priceCountdownElement.textContent = `${priceTimer}ç§’`;
    priceRefreshElement.textContent = priceTimer;

    // æ›´æ–°å½“å‰æ—¶è¾°æ˜¾ç¤º
    currentHourDisplay.textContent = hourNames[currentHourIndex] + "æ—¶";
  }

  // æ›´æ–°ç½—ç›˜ä½ç½®
  function updateCompass() {
    // è®¡ç®—å½“å‰æ—¶è¾°çš„è§’åº¦ï¼ˆæ¯ä¸ªæ—¶è¾°30åº¦ï¼‰
    const hourAngle = currentHourIndex * 30;

    // è®¾ç½®å½“å‰æ—¶è¾°æ ‡è®°ä½ç½®
    document.querySelector('.current-hour-mark').style.transform =
            `rotate(${hourAngle}deg) translateX(-50%) translateY(-10px)`;
    document.querySelector('.current-hour-dot').style.transform =
            `rotate(${hourAngle}deg) translateX(-50%) translateY(25px)`;
  }

  // ä¸»è®¡æ—¶å™¨å‡½æ•°
  function runTimers() {
    calculateTimers();
    updateTimers();
    updateCompass();

    // æ¯ç§’æ›´æ–°ä¸€æ¬¡
    setTimeout(runTimers, 1000);
  }

  // åˆå§‹åŒ–
  calculateTimers();
  updateTimers();
  updateCompass();
  runTimers();

  // æŒ‰é’®åŠŸèƒ½
  const cancelBtn = document.querySelector('.cancel-alert-btn');
  const incenseBtn = document.querySelector('.incense-btn');

  cancelBtn.addEventListener('click', function() {
    alert('æé†’å·²å–æ¶ˆï¼');
  });

  incenseBtn.addEventListener('click', function() {
    alert('æ‘„å¦–é¦™æé†’å·²å¼€å¯ï¼30åˆ†é’Ÿåå°†ä¼šæ”¶åˆ°æé†’');
  });

  // æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤º
  function updateCurrentTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    document.querySelector('.current-time').textContent = `${hours}:${minutes} 56A 5G 47`;
  }

  // è·¯çº¿ç­›é€‰åŠŸèƒ½
  function showRoute(type) {
    const recommendations = document.querySelectorAll('.recommendation');
    
    recommendations.forEach(rec => {
      const routeType = rec.getAttribute('data-route-type');
      
      if (type === 'all' || routeType === type || routeType === 'tips') {
        rec.style.display = 'block';
      } else {
        rec.style.display = 'none';
      }
    });
    
    // æ›´æ–°æŒ‰é’®çŠ¶æ€
    const buttons = document.querySelectorAll('[onclick^="showRoute"]');
    buttons.forEach(btn => {
      btn.style.opacity = '0.7';
      btn.style.transform = 'scale(0.95)';
    });
    
    // é«˜äº®å½“å‰é€‰ä¸­çš„æŒ‰é’®
    const currentBtn = document.querySelector(`[onclick="showRoute('${type}')"]`);
    if (currentBtn) {
      currentBtn.style.opacity = '1';
      currentBtn.style.transform = 'scale(1.05)';
    }
  }

     // ç´§å‡‘æ¨¡å¼åˆ‡æ¢
   function toggleCompact() {
     const body = document.body;
     const toggle = document.querySelector('.compact-toggle');
     
     if (body.classList.contains('compact-mode')) {
       body.classList.remove('compact-mode');
       toggle.textContent = 'ğŸ“±';
       toggle.title = 'åˆ‡æ¢åˆ°ç´§å‡‘æ¨¡å¼';
     } else {
       body.classList.add('compact-mode');
       toggle.textContent = 'ğŸ–¥ï¸';
       toggle.title = 'åˆ‡æ¢åˆ°å®Œæ•´æ¨¡å¼';
     }
   }

   // åŸå¸‚ç­›é€‰åŠŸèƒ½
   function filterCity(cityName) {
     const cityCards = document.querySelectorAll('.city-card');
     const filterButtons = document.querySelectorAll('.city-filter-btn');
     
     // æ›´æ–°æŒ‰é’®çŠ¶æ€
     filterButtons.forEach(btn => {
       btn.classList.remove('active');
     });
     
     // æ¿€æ´»å½“å‰é€‰ä¸­çš„æŒ‰é’®
     const currentBtn = document.querySelector(`[onclick="filterCity('${cityName}')"]`);
     if (currentBtn) {
       currentBtn.classList.add('active');
     }
     
     // ç­›é€‰åŸå¸‚å¡ç‰‡
     cityCards.forEach(card => {
       if (cityName === 'all' || card.getAttribute('data-city') === cityName) {
         card.classList.remove('hidden');
       } else {
         card.classList.add('hidden');
       }
     });
     
     // æ˜¾ç¤ºç­›é€‰æç¤º
    //  if (cityName !== 'all') {
    //    showNotification(`å·²ç­›é€‰: ${cityName}`);
    //  }
   }

  // äº¤æ˜“è®°å½•åŠŸèƒ½
  let tradeItems = [];
  let tradeRecordVisible = false;

  function toggleTradeRecord() {
    const record = document.getElementById('tradeRecord');
    const toggle = document.querySelector('.trade-toggle');
    
    if (tradeRecordVisible) {
      record.classList.remove('show');
      toggle.classList.remove('active');
      toggle.title = 'æ˜¾ç¤ºäº¤æ˜“è®°å½•';
    } else {
      record.classList.add('show');
      toggle.classList.add('active');
      toggle.title = 'éšè—äº¤æ˜“è®°å½•';
    }
    tradeRecordVisible = !tradeRecordVisible;
  }

  // ä¸€é”®è®°å½•å•†å“
  function recordItem(itemName, price, location) {
    // æç¤ºç©å®¶è¾“å…¥çœŸå®çš„ä¹°å…¥ä»·æ ¼
    const realPrice = prompt(`è¯·è¾“å…¥${itemName}çš„çœŸå®ä¹°å…¥ä»·æ ¼ï¼ˆå‚è€ƒä»·æ ¼ï¼š${price}é“¶ä¸¤ï¼‰:`);
    if (!realPrice || isNaN(realPrice)) return;
    
    const tradeItem = {
      id: Date.now(),
      item: itemName,
      price: parseInt(realPrice),
      location: location,
      time: new Date().toLocaleTimeString()
    };
    
    tradeItems.push(tradeItem);
    updateTradeDisplay();
    saveTradeItems();
    
    // æ˜¾ç¤ºæˆåŠŸæç¤º
    showNotification(`å·²è®°å½•: ${itemName} (${location}) - ${realPrice}é“¶ä¸¤`);
    
    // è‡ªåŠ¨æ˜¾ç¤ºäº¤æ˜“è®°å½•é¢æ¿
    if (!tradeRecordVisible) {
      toggleTradeRecord();
    }
  }

  function removeTradeItem(id) {
    const item = tradeItems.find(item => item.id === id);
    tradeItems = tradeItems.filter(item => item.id !== id);
    updateTradeDisplay();
    saveTradeItems();
    if (item) {
      showNotification(`å·²åˆ é™¤: ${item.item}`);
    }
  }

  function clearAllTrades() {
    if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•å—ï¼Ÿ')) {
      tradeItems = [];
      updateTradeDisplay();
      saveTradeItems();
      showNotification('å·²æ¸…ç©ºæ‰€æœ‰äº¤æ˜“è®°å½•');
    }
  }

  function updateTradeDisplay() {
    const container = document.getElementById('tradeItems');
    container.innerHTML = '';
    
    if (tradeItems.length === 0) {
      container.innerHTML = '<div style="color: #a0b0d0; text-align: center; font-size: 11px; padding: 10px;">æš‚æ— äº¤æ˜“è®°å½•</div>';
      return;
    }
    
    tradeItems.forEach(item => {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'trade-item';
      itemDiv.innerHTML = `
        <div class="item-info">${item.item} (${item.location})</div>
        <div class="price-info">ä¹°å…¥: ${item.price} é“¶ä¸¤</div>
        <div class="time-info">${item.time}</div>
        <button onclick="removeTradeItem(${item.id})" style="background: #ff6666; color: white; border: none; border-radius: 3px; padding: 2px 6px; font-size: 10px; cursor: pointer; margin-top: 3px;">åˆ é™¤</button>
      `;
      container.appendChild(itemDiv);
    });
  }

  function saveTradeItems() {
    localStorage.setItem('tradeItems', JSON.stringify(tradeItems));
  }

  function loadTradeItems() {
    const saved = localStorage.getItem('tradeItems');
    if (saved) {
      tradeItems = JSON.parse(saved);
      updateTradeDisplay();
    }
  }

  // æ˜¾ç¤ºé€šçŸ¥
  function showNotification(message) {
    // åˆ›å»ºé€šçŸ¥å…ƒç´ 
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(76, 175, 80, 0.9);
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 14px;
      z-index: 10000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      animation: fadeInOut 2s ease-in-out;
    `;
    notification.textContent = message;
    
    // æ·»åŠ åŠ¨ç”»æ ·å¼
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeInOut {
        0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
      }
    `;
    document.head.appendChild(style);
    
    document.body.appendChild(notification);
    
    // 2ç§’åè‡ªåŠ¨ç§»é™¤
    setTimeout(() => {
      document.body.removeChild(notification);
    }, 2000);
  }

  // åˆå§‹åŒ–æ—¶é—´å¹¶æ¯åˆ†é’Ÿæ›´æ–°
  updateCurrentTime();
  setInterval(updateCurrentTime, 60000);
  
  // é»˜è®¤æ˜¾ç¤ºå…¨éƒ¨è·¯çº¿
  showRoute('all');
  
  // åˆå§‹åŒ–äº¤æ˜“è®°å½•
  loadTradeItems();

  // é”®ç›˜å¿«æ·é”®
  document.addEventListener('keydown', function(e) {
    // Ctrl + 1: åˆ‡æ¢ç´§å‡‘æ¨¡å¼
    if (e.ctrlKey && e.key === '1') {
      e.preventDefault();
      toggleCompact();
    }
    // Ctrl + 2: æ˜¾ç¤ºæ–°æ‰‹è·¯çº¿
    if (e.ctrlKey && e.key === '2') {
      e.preventDefault();
      showRoute('newbie');
    }
    // Ctrl + 3: æ˜¾ç¤ºè¿›é˜¶è·¯çº¿
    if (e.ctrlKey && e.key === '3') {
      e.preventDefault();
      showRoute('intermediate');
    }
    // Ctrl + 4: æ˜¾ç¤ºé«˜çº§è·¯çº¿
    if (e.ctrlKey && e.key === '4') {
      e.preventDefault();
      showRoute('advanced');
    }
    // Ctrl + 0: æ˜¾ç¤ºå…¨éƒ¨è·¯çº¿
    if (e.ctrlKey && e.key === '0') {
      e.preventDefault();
      showRoute('all');
    }
    // Ctrl + T: åˆ‡æ¢äº¤æ˜“è®°å½•
    if (e.ctrlKey && e.key === 't') {
      e.preventDefault();
      toggleTradeRecord();
    }
    
         // Ctrl + C: æ¸…ç©ºäº¤æ˜“è®°å½•
     if (e.ctrlKey && e.key === 'c') {
       e.preventDefault();
       clearAllTrades();
     }
     // Ctrl + 5: æ˜¾ç¤ºå…¨éƒ¨åŸå¸‚
     if (e.ctrlKey && e.key === '5') {
       e.preventDefault();
       filterCity('all');
     }
     // Ctrl + 6: ç­›é€‰åœ°åºœ
     if (e.ctrlKey && e.key === '6') {
       e.preventDefault();
       filterCity('åœ°åºœ');
     }
     // Ctrl + 7: ç­›é€‰é•¿å®‰
     if (e.ctrlKey && e.key === '7') {
       e.preventDefault();
       filterCity('é•¿å®‰');
     }
     // Ctrl + 8: ç­›é€‰å‚²æ¥
     if (e.ctrlKey && e.key === '8') {
       e.preventDefault();
       filterCity('å‚²æ¥');
     }
     // Ctrl + 9: ç­›é€‰é•¿å¯¿
     if (e.ctrlKey && e.key === '9') {
       e.preventDefault();
       filterCity('é•¿å¯¿');
     }
     // Ctrl + 0: ç­›é€‰åŒ—ä¿±
     if (e.ctrlKey && e.key === '0') {
       e.preventDefault();
       filterCity('åŒ—ä¿±');
     }
  });
</script>
</body>
</html>
